create TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  age INTEGER NOT NULL,
  created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  updated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT pk_user PRIMARY KEY (id),
  CONSTRAINT UQ_USER_EMAIL unique (email)
);

CREATE TABLE IF NOT EXISTS categories (
   id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   category_id VARCHAR(255) NOT NULL,
   name VARCHAR(255) NOT NULL,
   description VARCHAR(255),
   icon VARCHAR(255),
   created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
   updated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
   user_id BIGINT NOT NULL,
   CONSTRAINT pk_categories PRIMARY KEY (id),
   CONSTRAINT UQ_CATEGORY_ID unique (category_id),
   CONSTRAINT fk_user_id FOREIGN KEY(user_id)
   REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS expenses (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    expense_id VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    amount NUMERIC(19,2) NOT NULL,
    category_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    expense_date TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    updated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    CONSTRAINT pk_expenses PRIMARY KEY (id),
    CONSTRAINT UQ_EXPENSE_ID unique (expense_id),
    CONSTRAINT fk_user_id FOREIGN KEY(user_id)
    REFERENCES users(id),
    CONSTRAINT fk_category_id FOREIGN KEY(category_id)
    REFERENCES categories(id)
)